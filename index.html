<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Hydra Audio Test</title>
  <script src="https://unpkg.com/hydra-synth"></script>
  <style>
    body, html { margin: 0; height: 100%; overflow: hidden; background: black; }
    canvas { display: block; width: 100vw; height: 100vh; }
  </style>
</head>
<body>
<script src="https://unpkg.com/hydra-synth@1.4.6"></script>
<script>
  const hydra = new Hydra({
    detectAudio: true,
    canvas: document.createElement('canvas')
  });
  document.body.appendChild(hydra.canvas);

  const a = hydra.audio;
  console.log('Audio objet a:', a);

  if(a) {
    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
      let audioCtx = new AudioContext();
      audioCtx.resume();
      let mic = audioCtx.createMediaStreamSource(stream);
      a.setSource(mic);
      a.show();
      // continue avec ton code...
    }).catch(err => {
      console.error("Erreur accès micro:", err);
    });
  } else {
    console.error("hydra.audio non disponible, vérifie la version du script");
  }
</script>

</body>
</html>
